var dkJSUSlider=new Class({settings:{},defaultSettings:{autoSlide:!0,autoSlideDuration:7e3,showNavigation:!0,showPagination:!0,createNavigation:!0,createPagination:!0,currentSlide:0,keyboardActions:!0,loopBeforeFirst:!0,loopAfterLast:!0,transition:function(a,b,c,d,e){b.setStyles({opacity:0,"z-index":2}).set("tween",{duration:"300",transition:"linear",onComplete:function(){a.setStyles({"z-index":0}),b.setStyles({"z-index":1}),e.canSlide=1}}).tween("opacity",[0,1])}},autoSlideTimeout:!1,canSlide:1,defaultPagiStyles:{position:"absolute","z-index":3},mouseInside:!1,navigation:!1,pagination:!1,pagers:[],initialize:function(a,b){return!a||a.hasClass("dk-jsu-slider")?!1:(a.addClass("dk-jsu-slider"),this.slider=a,this.getSettings(b),this.setSlides(),this.settings.nbSlides>1&&(this.setElements(),this.setEvents(),this.slides[0].setStyles({"z-index":1}),this.settings.showPagination&&this.pagers[0]&&this.pagers[0].addClass("current"),a.fireEvent("sliderready",1)),void 0)},getSettings:function(a){"object"!=typeof a&&(a={}),this.settings=Object.merge({},this.defaultSettings,a)},setSlides:function(){this.slides=this.slider.getChildren(),this.settings.nbSlides=this.slides.length,this.slides.each(function(a){a.addClass("dk-jsu-slide")})},setElements:function(){var a=this.settings;if(this.wrapper=new Element("div.dk-jsu-slider-wrapper"),this.wrapper.wraps(this.slider),this.slider.setStyles({position:"relative"}),this.slides.setStyles({position:"absolute",top:0,left:0,height:"100%",width:"100%","z-index":0}),a.showNavigation&&a.createNavigation&&(this.navigation=new Element("div.navigation"),this.navigation.set("html",'<div class="prev">prev</div><div class="next">next</div>'),this.navigation.getChildren().setStyles(this.defaultPagiStyles),this.wrapper.adopt(this.navigation)),a.showPagination&&a.createPagination){this.pagination=new Element("div.pagination");for(var b=0;b<a.nbSlides;b++)this.pagers[b]=new Element("span").set("html","&bull;").set("data-i",b),this.pagination.adopt(this.pagers[b]);this.pagination.setStyles(this.defaultPagiStyles),this.wrapper.adopt(this.pagination)}},setEvents:function(){var a=this,b=this.settings;b.showNavigation&&a.navigation&&(a.navigation.getElements(".next").addEvent("click",function(b){b&&b.preventDefault(),a.gotoSlide("next")}),a.navigation.getElements(".prev").addEvent("click",function(b){b&&b.preventDefault(),a.gotoSlide("prev")})),b.showPagination&&a.pagination&&a.pagers.each(function(b){b.addEvent("click",function(b){b&&b.preventDefault(),a.gotoSlide(parseInt(this.get("data-i"),10))})}),b.autoSlide&&(a.autoSlideEvent(),a.wrapper.addEvents({mouseenter:function(){a.mouseInside=!0,clearTimeout(a.autoSlideTimeout)},mouseleave:function(){a.mouseInside=!1,a.autoSlideEvent()}})),a.slider.addEvents({prevslide:function(){a.gotoSlide("prev")},nextslide:function(){a.gotoSlide("next")}}),b.keyboardActions&&$(window).addEvents({keydown:function(b){b.key&&document.activeElement&&-1==["input","textarea"].indexOf(document.activeElement.tagName.toLowerCase())&&("left"==b.key&&a.gotoSlide("prev"),"right"==b.key&&a.gotoSlide("next"))}})},autoSlideEvent:function(){var a=this,b=this.settings;a.mouseInside||(clearTimeout(a.autoSlideTimeout),a.autoSlideTimeout=setTimeout(function(){a.gotoSlide("next")},b.autoSlideDuration))},isPageVisible:function(){var a=!0;return"visibilityState"in document&&"hidden"===document.visibilityState&&(a=!1),a},gotoSlide:function(a){var b=this.settings,c=this.settings.currentSlide,d=a;if(this.isPageVisible()){if("prev"===a&&(a=b.currentSlide-1),"next"===a&&(a=b.currentSlide+1),0>a&&(a=b.nbSlides-1),a>=b.nbSlides&&(a=0),!b.loopBeforeFirst&&"prev"==d&&a==b.nbSlides-1)return 0;if(!b.loopAfterLast&&"next"==d&&0===a)return 0;if(1!==this.canSlide||a==c)return 0;this.canSlide=0,b.autoSlide&&this.autoSlideEvent(),oldSlide=this.slides[c],newSlide=this.slides[a],"function"==typeof this.settings.transition?this.settings.transition(oldSlide,newSlide,c,a,this):(oldSlide.setStyles({"z-index":0}),newSlide.setStyles({"z-index":1}),this.canSlide=1),b.currentSlide=a,b.showPagination&&this.pagers[a]&&(this.pagers.each(function(a){a.removeClass("current")}),this.pagers[a].addClass("current"))}}});