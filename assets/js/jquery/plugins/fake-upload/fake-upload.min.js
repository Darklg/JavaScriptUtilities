jQuery.fn.FakeUpload||!function(a){"use strict";var b="FakeUpload".toLowerCase(),c="plugin_"+b,d={defaultSettings:{defaultClass:"fake-upload-default-txt",defaultTxt:"Browse ...",fakeButtonClass:"cssc-button",hasFakeButton:0,hasFakeButtonTxt:"Choose a file",hasImgPreview:0,imgPreviewBg:0,imgPreviewClass:"cssc-imgpreview",imgPreviewEl:0},settings:{},init:function(a,b){this.el=a,this.getSettings(b),a.get(0)&&!a.hasClass("has-fakeupload")&&"file"==a.attr("type")&&(this.el.addClass("has-fakeupload"),this.advancedupload=this.isAdvancedUpload(),this.setWrapper(),this.setEvents())},getSettings:function(b){"object"!=typeof b&&(b={}),this.settings=a.extend(!0,{},this.defaultSettings,b);try{var c=JSON.parse(this.el.attr("data-fakeupload-settings"));"object"==typeof c&&(this.settings=a.extend(!0,{},this.settings,c))}catch(d){}},setWrapper:function(){var b=this,c=b.settings;this.wrapper=a('<div class="fakeupload-wrapper fakeupload-wrapper--jq"></div>'),this.cover=a('<div class="fakeupload-cover"></div>'),this.setDefaultStatus(),this.el.attr("size",100),this.el.wrap(this.wrapper),this.wrapper=this.el.parent(),this.wrapper.append(this.cover),c.hasFakeButton&&(this.fakeButton=a('<div class="fakeupload-button '+c.fakeButtonClass+'"></div>'),this.fakeButton.html(c.hasFakeButtonTxt),this.wrapper.append(this.fakeButton),this.wrapper.addClass("has-fake-button")),c.hasImgPreview&&(this.el.attr("accept","image/*"),this.wrapper.addClass("has-fake-image"),c.imgPreviewEl?this.imgPreview=c.imgPreviewEl:(this.wrapper.addClass("has-fake-image--default"),this.imgPreview=a('<div class="fakeupload-imgpreview '+c.imgPreviewClass+'"></div>'),this.wrapper.append(this.imgPreview)))},setEvents:function(){var b=this,c=b.settings;this.el.on("change",function(){var d=this,e=a(d).val().replace("C:\\fakepath\\","");"object"==typeof d.files&&d.files.length>0&&(e=Object.keys(d.files).map(function(a){return d.files[a].name}).join(", ")),""===e?b.setDefaultStatus():(b.cover.html(e).removeClass(c.defaultClass),a.proxy(b.setImagePreview,b)())}),this.wrapper.on("mousemove",function(b){var c=a(this).width()-Math.round(b.pageX-a(this).offset().left)-10,d=Math.round(b.pageY-a(this).offset().top)-30;a(this).children("input").css({top:d,right:c})}),this.wrapper.on("mouseleave",function(){a(this).children("input").css({top:0,right:0})})},setImagePreview:function(){var b=this,c=b.settings;if(this.settings.hasImgPreview&&b.advancedupload){b.imgPreview.html("");var d=new FileReader;if(!c.imgPreviewBg)var e=a('<img src="#" />');d.onload=function(a){c.imgPreviewBg?b.imgPreview.css("background-image","url("+a.target.result+")"):(e.attr("src",a.target.result),b.imgPreview.append(e))},d.readAsDataURL(b.el.get(0).files[0])}},setDefaultStatus:function(){var a=this,b=a.settings;this.cover.hasClass(b.defaultClass)||(this.cover.addClass(b.defaultClass),this.cover.html(b.defaultTxt)),this.imgPreview&&this.imgPreview.html("").attr("style","")},isAdvancedUpload:function(){var a=document.createElement("div");return("draggable"in a||"ondragstart"in a&&"ondrop"in a)&&"FormData"in window&&"FileReader"in window}};a.fn.FakeUpload=function(b){return this.each(function(){var e=a(this);e.hasClass(c)||(a.extend(!0,{},d).init(e,b),e.addClass(c))}),this}}(jQuery);